{"meta":{"title":"夜","subtitle":"看看","description":"描述","author":"夜","url":"http://yoursite.com"},"pages":[{"title":"","date":"2019-11-18T09:07:08.989Z","updated":"2019-11-18T09:07:08.989Z","comments":true,"path":"hexo-admin-ehc-images.json","permalink":"http://yoursite.com/hexo-admin-ehc-images.json","excerpt":"","text":"[{\"name\":\"DASHENG-900x700-1.png\",\"date\":1518959551960},{\"name\":\"DASHENG-900x700-2.png\",\"date\":1518959599098},{\"name\":\"DASHENG-900x700-3.png\",\"date\":1518959609913},{\"name\":\"DASHENG-900x700-4.png\",\"date\":1518959618105}]"}],"posts":[{"title":"My New Post","slug":"My-New-Post","date":"2019-11-18T07:26:26.000Z","updated":"2019-11-18T10:59:22.096Z","comments":true,"path":"2019/11/18/My-New-Post/","link":"","permalink":"http://yoursite.com/2019/11/18/My-New-Post/","excerpt":"","text":"一级标题二级标题三级标题1# 代码块 |ip|port||0.0.0.0|3306|","categories":[],"tags":[],"keywords":[]},{"title":"Hello World","slug":"hello-world","date":"2019-11-18T07:04:20.855Z","updated":"2019-11-18T07:04:20.855Z","comments":true,"path":"2019/11/18/hello-world/","link":"","permalink":"http://yoursite.com/2019/11/18/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[],"keywords":[]},{"title":"CDH5.16.1完全离线部署","slug":"CDH5-16-1完全离线部署","date":"2019-06-09T09:43:45.000Z","updated":"2019-12-09T10:13:01.585Z","comments":true,"path":"2019/06/09/CDH5-16-1完全离线部署/","link":"","permalink":"http://yoursite.com/2019/06/09/CDH5-16-1%E5%AE%8C%E5%85%A8%E7%A6%BB%E7%BA%BF%E9%83%A8%E7%BD%B2/","excerpt":"","text":"CDH下载cloudera-manager-centos7-cm5.16.1_x86_64.tar.gzCDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcelCDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel.sha1manifest.json 配置hostname及hosts准备三台服务器分别为hadoop001、hadoop002、hadoop003（每台的最低配 2核8G内存）上述cdh安装软件适用于centos7，如你的系统是centos6请下载centos6版本的安装包，我这里是centos7.2 1234567891011121314151617181920# 配置第一台服务器hostname hadoop001echo &quot;hadoop001&quot; &gt; /etc/hostnameecho &quot;192.168.1.11 hadoop001&quot;&gt;&gt; /etc/hostsecho &quot;192.168.1.12 hadoop002&quot;&gt;&gt; /etc/hostsecho &quot;192.168.1.13 hadoop003&quot;&gt;&gt; /etc/hosts# 配置第二台服务器hostname hadoop002echo &quot;hadoop002&quot; &gt; /etc/hostnameecho &quot;192.168.1.11 hadoop001&quot;&gt;&gt; /etc/hostsecho &quot;192.168.1.12 hadoop002&quot;&gt;&gt; /etc/hostsecho &quot;192.168.1.13 hadoop003&quot;&gt;&gt; /etc/hosts# 配置第三台服务器hostname hadoop003echo &quot;hadoop003&quot; &gt; /etc/hostnameecho &quot;192.168.1.11 hadoop001&quot;&gt;&gt; /etc/hostsecho &quot;192.168.1.12 hadoop002&quot;&gt;&gt; /etc/hostsecho &quot;192.168.1.13 hadoop003&quot;&gt;&gt; /etc/hosts 关闭所有节点的防火火墙及清空规则123systemctl stop firewalldsystemctl disable firewalldiptables -F 关闭所有节点的selinux1234vi /etc/selinux/config将 SELINUX=enforcing 改为 SELINUX=disabled设置后需要重启才能生生效 设置所有节点的时区一一致及时钟同步设置时区12345678910date# 查看系统时间timedatectl# 查看当前系统使用的时区timedatectl list-timezones# 查看所有时区timedatectl set-timezone Asia/Shanghai#设置当前系统时区为亚洲上海时区#注意所有节点都需要设置，并且时区保持一直 时间同步12345678910111213141516171819202122232425262728293031323334# 所有节点安装ntp，所有节点都需要安装yum install -y ntp# 选取hadoop001为ntp的主节点，修改hadoop001节点上的 /etc/ntp.conf 配置文件vi /etc/ntp.conf# 在配置文件的顶部配置 （logfile /var/log/ntp.log）的位置下，添加如下配置 #文件内容 server 0.asia.pool.ntp.org server 1.asia.pool.ntp.org server 2.asia.pool.ntp.org server 3.asia.pool.ntp.org #当外部时间不可⽤时，可使⽤本地硬件时间 server 127.127.1.0 iburst local clock #允许哪些⽹段的机器来同步时间，即你从节点所在网段 #表示 192.168.1.0网段下的所有机器都可以来同步，这里IP需要根据自己实际的IP网段进行修改 restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap#开启hadoop001上的 ntpd及查看状态systemctl start ntpdsystemctl enable ntpdsystemctl status ntpd#验证ntpq -p#其他的从节点停⽌禁⽤ntpd服务，并同步hadoop001上的时间，即在hadoop002、hadoop003中执行以下命令systemctl stop ntpdsystemctl disable ntpd/usr/sbin/ntpdate hadoop001#每天凌晨同步hadoop001节点时间，在下面命令打开的文件中添加文件内容（打开文件后，请使用vi命令添加修改保存）crontab -e # 文件内容 00 00 * * * /usr/sbin/ntpdate hadoop001 部署集群的JDKjdk-8u45-linux-x64.tar.gz 下载 12345678# 在所有节点上执行以下命令mkdir /usr/javatar -zxvf jdk-8u45-linux-x64.gz -C /usr/java/chown -R root:root /usr/java/jdk1.8.0_45echo &apos;export JAVA_HOME=/usr/java/jdk1.8.0_45&apos; &gt;&gt; /etc/profileecho &apos;export PATH=$&#123;JAVA_HOME&#125;/bin:$&#123;PATH&#125;&apos; &gt;&gt; /etc/profilesource /etc/profilewhich java 离线部署MySQL5.7MySQL5.7离线部署MySQL离线部署请参照我另一篇博客，另外我这里是将MySQL部署在hadoop001机器上的 CDH部署创建CDH的元数据库和⽤户、amon服务的数据库及⽤户1234567# 登录mysql 客户端，执行以下mysql命令# 创建数据库，并创建用户及授权访问create database cmf DEFAULT CHARACTER SET utf8;create database amon DEFAULT CHARACTER SET utf8;grant all on cmf.* TO &apos;cmf&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos;;grant all on amon.* TO &apos;amon&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos;;flush privileges; hadoop001节点部署mysql jdbc jar123mkdir -p /usr/share/java/# 注意一定要将版本号去掉cp mysql-connector-java-5.1.47.jar /usr/share/java/mysql-connector-java.jar 离线部署cm server及agent我这里使用hadoop001做为主节点，运行CM Server 12345678910111213141516171819202122# 所有节点，创建⽬录及解压mkdir /opt/cloudera-managertar -zxvf cloudera-manager-centos7-cm5.16.1_x86_64.tar.gz -C /opt/cloudera-manager/# 所有节点修改agent的配置，指向server的节点hadoop001sed -i &quot;s/server_host=localhost/server_host=hadoop001/g&quot; /opt/cloudera-manager/cm-5.16.1/etc/cloudera-scm-agent/config.ini# 主节点修改server的配置:vi /opt/cloudera-manager/cm-5.16.1/etc/cloudera-scm-server/db.properties # 文件内容 com.cloudera.cmf.db.type=mysql com.cloudera.cmf.db.host=hadoop001 com.cloudera.cmf.db.name=cmf com.cloudera.cmf.db.user=cmf com.cloudera.cmf.db.password=123456 com.cloudera.cmf.db.setupType=EXTERNAL # 所有节点，创建⽤户useradd --system --home=/opt/cloudera-manager/cm-5.16.1/run/cloudera-scm-server/ --no-create-home --shell=/bin/false --comment &quot;Cloudera SCM User&quot; cloudera-scm# 所有节点，⽬录修改⽤户及⽤户组chown -R cloudera-scm:cloudera-scm /opt/cloudera-manager hadoop001节点部署离线parcel源123456789101112131415# hadoop001节点部署离线parcel源mkdir -p /opt/cloudera/parcel-repocp CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel /opt/cloudera/parcel-repo/# 切记cp时，重命名去掉1，不然在部署过程CM认为如上⽂件下载未完整，会持续下载cp CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel.sha1 /opt/cloudera/parcel-repo/CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel.shacp manifest.json /opt/cloudera/parcel-repo/# ⽬录修改⽤户及⽤户组chown -R cloudera-scm:cloudera-scm /opt/cloudera/# 所有节点创建软件安装⽬录、⽤户及⽤户组权限mkdir -p /opt/cloudera/parcelschown -R cloudera-scm:cloudera-scm /opt/cloudera/ hadoop001节点启动Server1234/opt/cloudera-manager/cm-5.16.1/etc/init.d/cloudera-scm-server start#阿⾥云web界⾯，设置该hadoop001节点防⽕墙放开7180端⼝#等待1min，打开 http://hadoop001:7180 账号密码:admin/admin#假如打不开，去看server的log，根据错误仔细排查错误 启动所有节点上的agent1/opt/cloudera-manager/cm-5.16.1/etc/init.d/cloudera-scm-agent start 建议（非必须）12345678910111213141516171819202122232425261、建议将/proc/sys/vm/swappiness设置为最大大值10。swappiness值控制操作系统尝试交换内存的积极;swappiness=0:表示最大大限度使用用物理理内存,之后才是swap空间;swappiness=100:表示积极使用用swap分区,并且把内存上的数据及时搬迁到swap空间;如果是混合服务器器,不不建议完全禁用用swap,可以尝试降低swappiness。临时调整:sysctl vm.swappiness=10永久调整:# 在 /etc/sysctl.conf 文件中添加以下配置# Adjust swappiness valuevm.swappiness=102、已启用用透明大大⻚页面面压缩,可能会导致重大大性能问题,建议禁用用此设置。临时调整:echo never &gt; /sys/kernel/mm/transparent_hugepage/defragecho never &gt; /sys/kernel/mm/transparent_hugepage/enabled永久调整:# /etc/rc.d/rc.local 文件下添加以下命令vi /etc/rc.d/rc.local# Disable transparent_hugepageecho never &gt; /sys/kernel/mm/transparent_hugepage/defragecho never &gt; /sys/kernel/mm/transparent_hugepage/enabled# centos7.x系统,需要为&quot;/etc/rc.d/rc.local&quot;文文件赋予执行行行权限chmod +x /etc/rc.d/rc.local CDH配置访问 http://hadoop001:7180/账号密码:admin/admin接下来,全部Web界面面操作 欢迎使用用Cloudera Manager–最终用用户许可条款与条件。勾选 欢迎使用用Cloudera Manager–您想要部署哪个版本?选择Cloudera Express免费版本 感谢您选择Cloudera Manager和CDH为CDH集群安装指导主机。选择[当前管理理的主机],全部勾选 选择存储库 集群安装–正在安装选定Parcel假如本地parcel离线源配置正确,则”下载”阶段瞬间完成,其余阶段视节点数与内部网网络情况决定。 检查主机正确性 自定义服务,选择部署Zookeeper、HDFS、Yarn服务 自定义⻆色分配 数据库设置 审改设置,默认即可 首次运行 恭喜您! 主⻚","categories":[],"tags":[],"keywords":[]}]}